---
sidebar_position: 3
slug: /sistema/tecnologia
description: "VisÃ£o tÃ©cnica da soluÃ§Ã£o"
---

# Tecnologia

A plataforma AgroTech foi desenvolvida com tecnologias modernas e escalÃ¡veis, seguindo as melhores prÃ¡ticas de desenvolvimento de software.

## ğŸ—ï¸ Arquitetura Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND - REACT                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Interface Web Responsiva     â€¢ Mapas Interativos                  â”‚
â”‚ â€¢ Dashboards e VisualizaÃ§Ãµes   â€¢ ExportaÃ§Ã£o de RelatÃ³rios           â”‚
â”‚ â€¢ AutenticaÃ§Ã£o                 â€¢ ComparaÃ§Ãµes Temporais              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP/REST APIs
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BACKEND - PYTHON/FLASK                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   API Routes    â”‚  â”‚ Image Processing â”‚  â”‚  AI/ML Services     â”‚ â”‚
â”‚ â”‚   - Auth        â”‚  â”‚  - NDVI/EVI      â”‚  â”‚  - SARIMA           â”‚ â”‚
â”‚ â”‚   - CRUD        â”‚  â”‚  - Biomassa      â”‚  â”‚  - RegressÃ£o        â”‚ â”‚
â”‚ â”‚   - Reports     â”‚  â”‚  - Cobertura     â”‚  â”‚  - SÃ©ries Temporais â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚
           â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL DB     â”‚    â”‚        GOOGLE EARTH ENGINE API          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ UsuÃ¡rios          â”‚    â”‚ â€¢ Imagens Landsat/Sentinel              â”‚
â”‚ â€¢ Propriedades      â”‚    â”‚ â€¢ Processamento na Nuvem                â”‚
â”‚ â€¢ Ãreas             â”‚    â”‚ â€¢ Dados HistÃ³ricos                      â”‚
â”‚ â€¢ MÃ©tricas          â”‚    â”‚ â€¢ Filtros Temporais                     â”‚
â”‚ â€¢ RelatÃ³rios        â”‚    â”‚ â€¢ OpenLandMap (solo)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Frontend

### Stack Principal

#### React + TypeScript + Vite
- **React 18+**: Biblioteca UI moderna com hooks e context
- **TypeScript**: Tipagem estÃ¡tica para maior seguranÃ§a e produtividade
- **Vite**: Build tool ultrarrÃ¡pido para desenvolvimento
- **Bun**: Runtime JavaScript alternativo (opcional)

#### EstilizaÃ§Ã£o
- **Tailwind CSS**: Framework CSS utility-first
- **shadcn/ui**: Componentes React acessÃ­veis e customizÃ¡veis
- **Radix UI**: Primitivos headless para componentes complexos
- **Lucide Icons**: Biblioteca de Ã­cones moderna

#### Estado e Dados
- **React Query (TanStack Query)**: Gerenciamento de estado servidor
- **Context API**: Estado global da aplicaÃ§Ã£o
- **Zustand/Jotai**: Gerenciamento de estado leve (se necessÃ¡rio)

#### Mapas e VisualizaÃ§Ã£o
- **Leaflet/Mapbox GL**: Mapas interativos
- **React-Leaflet**: Bindings React para Leaflet
- **Chart.js / Recharts**: GrÃ¡ficos e visualizaÃ§Ãµes
- **D3.js**: VisualizaÃ§Ãµes customizadas (se necessÃ¡rio)

#### Roteamento e NavegaÃ§Ã£o
- **React Router v6**: Roteamento client-side
- **NavegaÃ§Ã£o hierÃ¡rquica** com breadcrumbs

### Estrutura de Pastas

```
frontend/
â”œâ”€â”€ public/              # Arquivos estÃ¡ticos
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/         # Imagens, Ã­cones, fontes
â”‚   â”œâ”€â”€ components/     # Componentes reutilizÃ¡veis
â”‚   â”‚   â”œâ”€â”€ ui/        # Componentes shadcn/ui
â”‚   â”‚   â”œâ”€â”€ maps/      # Componentes de mapa
â”‚   â”‚   â””â”€â”€ charts/    # Componentes de grÃ¡ficos
â”‚   â”œâ”€â”€ hooks/         # Custom hooks
â”‚   â”œâ”€â”€ lib/           # UtilitÃ¡rios e helpers
â”‚   â”œâ”€â”€ pages/         # PÃ¡ginas da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ services/      # ServiÃ§os de API
â”‚   â”œâ”€â”€ types/         # DefiniÃ§Ãµes TypeScript
â”‚   â”œâ”€â”€ App.tsx        # Componente raiz
â”‚   â””â”€â”€ main.tsx       # Entry point
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tailwind.config.ts
```

### Build e Deploy
- **Build de ProduÃ§Ã£o**: `npm run build`
- **Preview**: `npm run preview`
- **Deploy**: Netlify, Vercel ou GitHub Pages
- **CI/CD**: GitHub Actions (opcional)

## âš™ï¸ Backend

### Stack Principal

#### Python 3.10+
- **Flask**: Framework web leve e flexÃ­vel
- **Flask-CORS**: Habilita Cross-Origin Resource Sharing
- **Flasgger**: DocumentaÃ§Ã£o automÃ¡tica da API (Swagger/OpenAPI)

#### ORM e Banco de Dados
- **SQLAlchemy 2.0**: ORM moderno com tipagem
- **PostgreSQL**: Banco de dados relacional robusto
- **psycopg2-binary**: Driver PostgreSQL
- **Alembic**: Migrations de banco de dados (opcional)

#### Processamento de Imagens e Geoespacial
- **earthengine-api**: SDK oficial do Google Earth Engine
- **geemap**: Biblioteca Python para GEE com visualizaÃ§Ãµes
- **geopandas**: ManipulaÃ§Ã£o de dados geoespaciais
- **shapely**: OperaÃ§Ãµes geomÃ©tricas
- **rasterio**: Leitura de dados raster
- **PIL/Pillow**: Processamento de imagens

#### Machine Learning e EstatÃ­stica
- **statsmodels**: Modelos estatÃ­sticos (SARIMA)
- **scikit-learn**: Machine learning (regressÃ£o, clustering)
- **numpy**: ComputaÃ§Ã£o numÃ©rica
- **pandas**: ManipulaÃ§Ã£o de dados tabulares
- **scipy**: Algoritmos cientÃ­ficos

#### AutenticaÃ§Ã£o
- **Firebase Admin SDK**: AutenticaÃ§Ã£o e Firestore
- **PyJWT**: JSON Web Tokens
- **python-dotenv**: Gerenciamento de variÃ¡veis de ambiente

### Estrutura de Pastas

```
backend/
â”œâ”€â”€ auth/                      # MÃ³dulo de autenticaÃ§Ã£o
â”‚   â”œâ”€â”€ app.py                # Servidor Flask auth
â”‚   â”œâ”€â”€ firebase_config.py    # ConfiguraÃ§Ã£o Firebase
â”‚   â”œâ”€â”€ static/               # Frontend do auth
â”‚   â””â”€â”€ templates/            # Templates HTML
â”œâ”€â”€ CRUD/                      # MÃ³dulo principal CRUD
â”‚   â”œâ”€â”€ main.py               # Entry point
â”‚   â”œâ”€â”€ database.py           # ConfiguraÃ§Ã£o DB
â”‚   â”œâ”€â”€ models.py             # Modelos SQLAlchemy
â”‚   â”œâ”€â”€ routes/               # Rotas da API
â”‚   â”‚   â”œâ”€â”€ area_routes.py
â”‚   â”‚   â”œâ”€â”€ propriedade_routes.py
â”‚   â”‚   â”œâ”€â”€ metricas_routes.py
â”‚   â”‚   â”œâ”€â”€ metricas_solo_routes.py
â”‚   â”‚   â”œâ”€â”€ metricas_preditivas_routes.py
â”‚   â”‚   â””â”€â”€ relatorios_routes.py
â”‚   â””â”€â”€ services/             # LÃ³gica de negÃ³cio
â”‚       â””â”€â”€ metrics_manager.py
â”œâ”€â”€ metrics/                   # MÃ³dulo de mÃ©tricas
â”‚   â”œâ”€â”€ agro_metrics.py       # Servidor de mÃ©tricas agrÃ­colas
â”‚   â”œâ”€â”€ soil_metrics.py       # Servidor de mÃ©tricas de solo
â”‚   â””â”€â”€ keys/                 # Chaves de serviÃ§os
â”œâ”€â”€ preditive/                 # MÃ³dulo preditivo
â”‚   â”œâ”€â”€ sarima_api.py         # API SARIMA
â”‚   â””â”€â”€ data/                 # Dados de previsÃµes
â”œâ”€â”€ google_earth_engine.ipynb  # Notebook exploratÃ³rio GEE
â”œâ”€â”€ modelo_preditivo.ipynb     # Notebook modelos ML
â””â”€â”€ requirements.txt
```

### APIs e Endpoints

#### API CRUD (porta 5001)
- **Propriedades**: `/api/propriedade/*`
- **Ãreas**: `/api/area/*`
- **MÃ©tricas**: `/api/metricas/*`
- **MÃ©tricas Solo**: `/api/metricas-solo/*`
- **MÃ©tricas Preditivas**: `/api/metricas-preditivas/*`
- **RelatÃ³rios**: `/api/relatorios/*`

#### API MÃ©tricas AgrÃ­colas (porta 5002)
- CÃ¡lculo de NDVI, EVI, NDWI, NDMI, SAVI
- Biomassa e cobertura vegetal
- Processamento via Google Earth Engine

#### API MÃ©tricas de Solo (porta 5003)
- CÃ¡lculo de teor de argila
- Dados do OpenLandMap

#### API SARIMA (porta 5004)
- PrevisÃµes de sÃ©ries temporais
- AnÃ¡lise estatÃ­stica

### DocumentaÃ§Ã£o da API
- **Swagger UI**: DisponÃ­vel em `/apidocs` em cada API
- **OpenAPI Specification**: Gerado automaticamente pelo Flasgger

## ğŸ—„ï¸ Banco de Dados

### PostgreSQL

#### Schema Principal

**Tabelas:**

1. **propriedade**
   - `id` (PK, serial)
   - `nome` (varchar)
   - `responsavel` (varchar)
   - `data_criacao` (timestamp)

2. **area**
   - `id` (PK, serial)
   - `propriedade_id` (FK)
   - `nome_area` (varchar)
   - `coordenada` (jsonb)
   - `municipio` (varchar)
   - `estado` (varchar)
   - `cultura_principal` (varchar)
   - `data_criacao` (timestamp)
   - `imagens` (text)
   - `observacoes` (text)

3. **metricas**
   - `id` (PK, serial)
   - `area_id` (FK)
   - `periodo_inicio` (date)
   - `periodo_fim` (date)
   - `ndvi_mean/median/std` (decimal)
   - `evi_mean/median/std` (decimal)
   - `ndwi_mean/median/std` (decimal)
   - `ndmi_mean/median/std` (decimal)
   - `savi_mean/median/std` (decimal)
   - `cobertura_vegetal` (decimal)
   - `biomassa_estimada` (decimal)

4. **metricas_solo**
   - `id` (PK, serial)
   - `area_id` (FK)
   - `profundidade` (varchar)
   - `clay_mean/min/max` (decimal)
   - `data_calculo` (timestamp)

5. **metricas_preditivas**
   - `id` (PK, serial)
   - `area_id` (FK)
   - `metrica_nome` (varchar)
   - `data_previsao` (date)
   - `valor_previsto` (decimal)
   - `intervalo_confianca_min/max` (decimal)
   - `data_calculo` (timestamp)

6. **relatorio**
   - `id` (PK, serial)
   - `area_id` (FK)
   - `tipo` (varchar)
   - `periodo_inicio/fim` (date)
   - `arquivo_path` (text)
   - `data_geracao` (timestamp)
   - `status` (varchar)

#### Relacionamentos
- **1:N** - Propriedade â†’ Ãreas
- **1:N** - Ãrea â†’ MÃ©tricas
- **1:N** - Ãrea â†’ MÃ©tricas Solo
- **1:N** - Ãrea â†’ MÃ©tricas Preditivas
- **1:N** - Ãrea â†’ RelatÃ³rios

#### Ãndices
- Ãndices em chaves estrangeiras
- Ãndice em `periodo_inicio`, `periodo_fim` para consultas temporais
- Ãndice JSONB em `coordenada` para consultas geoespaciais

### Firebase Firestore
- **AutenticaÃ§Ã£o de usuÃ¡rios**
- **SincronizaÃ§Ã£o em tempo real** (opcional)
- **Backup de configuraÃ§Ãµes**

## ğŸŒ Google Earth Engine

### IntegraÃ§Ã£o

#### AutenticaÃ§Ã£o
```python
import ee
ee.Authenticate()
ee.Initialize()
```

#### Datasets Utilizados

1. **Sentinel-2**
   - ColeÃ§Ã£o: `COPERNICUS/S2_SR`
   - ResoluÃ§Ã£o: 10-20m
   - Bandas: B2 (Blue), B3 (Green), B4 (Red), B8 (NIR), B11 (SWIR1), B12 (SWIR2)

2. **Landsat 8/9**
   - ColeÃ§Ã£o: `LANDSAT/LC08/C02/T1_L2`, `LANDSAT/LC09/C02/T1_L2`
   - ResoluÃ§Ã£o: 30m
   - Bandas: B2-B7

3. **OpenLandMap - Soil**
   - ColeÃ§Ã£o: `OpenLandMap/SOL/SOL_CLAY-WFRACTION_USDA-3A1A1A_M/v02`
   - ResoluÃ§Ã£o: ~250m
   - Profundidades: 0-200cm

#### Processamento
- **Filtros temporais**: `.filterDate(start, end)`
- **Filtros espaciais**: `.filterBounds(geometry)`
- **MÃ¡scaras de nuvens**: QA bands
- **ReduÃ§Ã£o estatÃ­stica**: `.reduceRegion()`

### CÃ¡lculos de Ãndices

```python
# NDVI
ndvi = (nir - red) / (nir + red)

# EVI
evi = 2.5 * ((nir - red) / (nir + 6*red - 7.5*blue + 1))

# NDWI
ndwi = (green - nir) / (green + nir)

# NDMI
ndmi = (nir - swir1) / (nir + swir1)

# SAVI
L = 0.5
savi = ((nir - red) / (nir + red + L)) * (1 + L)
```

## ğŸ” SeguranÃ§a

### AutenticaÃ§Ã£o e AutorizaÃ§Ã£o
- **Firebase Authentication**: Login seguro
- **JWT Tokens**: AutenticaÃ§Ã£o stateless
- **CORS configurado**: Apenas origens permitidas
- **HTTPS**: ComunicaÃ§Ã£o criptografada (produÃ§Ã£o)

### ProteÃ§Ã£o de Dados
- **SanitizaÃ§Ã£o de inputs**: PrevenÃ§Ã£o de SQL Injection
- **ValidaÃ§Ã£o de schemas**: Pydantic ou marshmallow
- **Rate limiting**: ProteÃ§Ã£o contra abuso de API
- **Logs de auditoria**: Rastreamento de aÃ§Ãµes

### VariÃ¡veis de Ambiente
```bash
# .env
DATABASE_URL=postgresql://user:pass@localhost:5432/agrotech
FIREBASE_CREDENTIALS_PATH=/path/to/credentials.json
GEE_SERVICE_ACCOUNT=your-sa@project.iam.gserviceaccount.com
SECRET_KEY=your-secret-key
```

## ğŸ“¦ DependÃªncias Principais

### Frontend (`package.json`)
```json
{
  "dependencies": {
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-router-dom": "^6.x",
    "@tanstack/react-query": "^5.x",
    "tailwindcss": "^3.x",
    "leaflet": "^1.x",
    "react-leaflet": "^4.x",
    "chart.js": "^4.x",
    "recharts": "^2.x"
  },
  "devDependencies": {
    "@types/react": "^19.x",
    "typescript": "^5.x",
    "vite": "^6.x"
  }
}
```

### Backend (`requirements.txt`)
```
Flask==3.0.0
flask-cors==4.0.0
flasgger==0.9.7
SQLAlchemy==2.0.23
psycopg2-binary==2.9.9
earthengine-api==0.1.384
geemap==0.29.6
geopandas==0.14.1
statsmodels==0.14.1
scikit-learn==1.3.2
pandas==2.1.4
numpy==1.26.2
firebase-admin==6.3.0
PyJWT==2.8.0
python-dotenv==1.0.0
```

## ğŸš€ Deploy e DevOps

### Ambientes

#### Desenvolvimento
- Frontend: `http://localhost:5173` (Vite dev server)
- Backend CRUD: `http://localhost:5001`
- Backend Metrics: `http://localhost:5002`
- Backend Soil: `http://localhost:5003`
- Backend SARIMA: `http://localhost:5004`

#### ProduÃ§Ã£o
- Frontend: Netlify/Vercel
- Backend: AWS EC2, Google Cloud Run, ou Heroku
- Banco: Amazon RDS PostgreSQL ou Google Cloud SQL

### Scripts de AutomaÃ§Ã£o

#### Linux/macOS: `start_all.sh`
```bash
#!/bin/bash
# Inicia todos os serviÃ§os em background
```

#### Windows: `start_all.ps1`
```powershell
# Inicia todos os serviÃ§os em janelas separadas
```

### Monitoramento
- **Logs**: Arquivos de log por serviÃ§o
- **Health checks**: Endpoints `/health` em cada API
- **MÃ©tricas**: CPU, memÃ³ria, tempo de resposta

## ğŸ§ª Testes

### Frontend
- **Vitest**: Testes unitÃ¡rios
- **React Testing Library**: Testes de componentes
- **Playwright/Cypress**: Testes E2E

### Backend
- **pytest**: Framework de testes
- **pytest-flask**: Testes de rotas Flask
- **unittest.mock**: Mocks de serviÃ§os externos
- **Coverage**: Cobertura de cÃ³digo

## ğŸ“š DocumentaÃ§Ã£o TÃ©cnica

### Ferramentas
- **Docusaurus**: DocumentaÃ§Ã£o estÃ¡tica (este site)
- **Swagger/OpenAPI**: DocumentaÃ§Ã£o de API
- **JSDoc/TSDoc**: DocumentaÃ§Ã£o inline de cÃ³digo
- **Markdown**: DocumentaÃ§Ã£o em repositÃ³rio

### PadrÃµes de CÃ³digo
- **ESLint**: Linting JavaScript/TypeScript
- **Prettier**: FormataÃ§Ã£o de cÃ³digo
- **Black**: FormataÃ§Ã£o Python
- **Flake8**: Linting Python